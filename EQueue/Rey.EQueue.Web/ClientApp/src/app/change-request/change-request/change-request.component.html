<div *ngIf="mode == 'incoming'">
    <h1>Incoming Requests</h1>
</div>
<div *ngIf="mode == 'outcoming'">
    <h1>Outgoing Requests</h1>
</div>
<table *ngIf="hasData; else noData" mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    
    <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
    <!-- Position Column -->

    <div class="column">
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>Id</th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>
    </div>

    <div class="column">
        <ng-container matColumnDef="subjectInstanceName">
            <th mat-header-cell *matHeaderCellDef>Subject Instance Name</th>
            <td mat-cell *matCellDef="let element"> {{element.subjectInstanceName}} </td>
        </ng-container>
    </div>

    <!-- Name Column -->
    <div class="column">
        <ng-container matColumnDef="startTime">
            <th mat-header-cell *matHeaderCellDef> Start Time </th>
            <td mat-cell *matCellDef="let element"> {{element.queueStartTime | date: 'dd.MM.yyyy h:mm a'}} </td>
        </ng-container>
    </div>

    <!-- Weight Column -->
    <div class="column">
        <ng-container matColumnDef="peopleIn">
            <th mat-header-cell *matHeaderCellDef>People In</th>
            <td mat-cell *matCellDef="let element"> {{element.peopleIn ?? 'N/A'}} </td>
        </ng-container>
    </div>

    <!-- Symbol Column -->
    <div class="column">
        <ng-container matColumnDef="currentUserPosition">
            <th mat-header-cell *matHeaderCellDef>Your Position</th>
            <td mat-cell *matCellDef="let element"> {{element.currentUserPosition ?? 'N/A'}} </td>
        </ng-container>
    </div>

    <div class="column">
        <ng-container matColumnDef="changeUserPosition">
            <th mat-header-cell *matHeaderCellDef>Another User Position</th>
            <td mat-cell *matCellDef="let element"> {{element.anotherUserPosition ?? 'N/A'}} </td>
        </ng-container>
    </div>

    <div class="column">
        <ng-container matColumnDef="userFirstName">
            <th mat-header-cell *matHeaderCellDef> First Name </th>
            <td mat-cell *matCellDef="let element"> {{element.userFirstName }} </td>
        </ng-container>
    </div>

    <div class="column">
        <ng-container matColumnDef="userLastName">
            <th mat-header-cell *matHeaderCellDef> Last Name </th>
            <td mat-cell *matCellDef="let element"> {{element.userLastName }} </td>
        </ng-container>
    </div>
    <div class="column">
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status }} </td>
        </ng-container>
    </div>

    <div class="column">
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
                <div *ngIf="showApproveDeclineActions(element)">
                    <div>
                        <button mat-raised-button color="primary" class="eq-buttons approve-button" (click)="approveChangeRequest(element,$event)">Approve</button>
                    </div>
                    <div>
                        <button mat-raised-button color="primary" class="eq-buttons decline-button" (click)="declineChangeRequest(element,$event)">Decline</button>
                    </div>
                </div>
                <div *ngIf="showVoidAction(element)">
                    <div>
                        <button mat-raised-button color="primary" class="eq-buttons void-button" (click)="voidChangeRequest(element,$event)">Void</button>
                    </div>
                </div>
                <div>
                    <button mat-raised-button color="primary" class="eq-buttons see-queue-button" (click)="visitQueue(element,$event)">See queue</button>
                </div>
            </td>
        </ng-container>
    </div>

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
</table>
<ng-template #noData>
    <div>
        No data found.
    </div>
</ng-template>